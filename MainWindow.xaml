<Window x:Class="ZooTicket.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ZooTicket"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">
    <Grid>
        <!-- Верхняя панель с информацией о пользователе -->
        <Border Background="#2E86AB" Padding="10" Height="40" VerticalAlignment="Top">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="ZooTicket - Система учета билетов"
                      Foreground="White" FontSize="16" FontWeight="Bold"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock x:Name="UserInfoText" Foreground="White" Margin="0,0,10,0"/>
                    <Button Content="Выйти" Click="LogoutButton_Click"
                        Background="#A23B72" Foreground="White" Padding="10,5"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- TABCONTROL -->
        <TabControl x:Name="MainTabControl" Margin="0,40,0,0">
            <!-- Продажа билетов -->
            <TabItem Header="Продажа билетов" x:Name="SalesTab">
                <StackPanel Margin="20">
                    <TextBlock Text="Продажа билетов" FontSize="20" FontWeight="Bold" Margin="0,0,0,20"/>

                    <StackPanel Orientation="Horizontal" Margin="0,10">
                        <Button Content="Добавить взрослый билет (500 руб)"
                            Click="AddAdultTicket_Click"
                            Padding="10" Margin="0,0,10,0"/>
                        <Button Content="Добавить детский билет (250 руб)"
                            Click="AddChildTicket_Click"
                            Padding="10"/>
                    </StackPanel>

                    <TextBlock Text="Корзина:" FontWeight="Bold" Margin="0,20,0,10"/>
                    <ListBox x:Name="CartListBox" Height="150">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Type}"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>

                    <TextBlock x:Name="TotalText" FontSize="16" FontWeight="Bold" Margin="0,10"/>

                    <StackPanel Orientation="Horizontal" Margin="0,20">
                        <Button Content="Оформить продажу" Click="ProcessSale_Click"
                            Background="Green" Foreground="White" Padding="15,8"/>
                        <Button Content="Очистить корзину" Click="ClearCart_Click"
                            Background="Red" Foreground="White" Padding="15,8" Margin="10,0,0,0"/>
                    </StackPanel>
                </StackPanel>
            </TabItem>

            <!-- Проверка билетов -->
            <TabItem Header="Проверка билетов" x:Name="CheckTab">
                <StackPanel Margin="20">
                    <TextBlock Text="Проверка билетов" FontSize="20" FontWeight="Bold" Margin="0,0,0,20"/>

                    <!-- Placeholder Grid для TicketId -->
                    <Grid Width="200" Height="30" Margin="0,0,0,10">
                        <TextBox x:Name="TicketIdTextBox"
                             FontSize="14"
                             VerticalContentAlignment="Center"
                             TextChanged="TicketIdTextBox_TextChanged"/>
                        <TextBlock x:Name="TicketIdPlaceholder"
                               Text="Введите ID билета"
                               Margin="5,0,0,0"
                               VerticalAlignment="Center"
                               Foreground="Gray"
                               IsHitTestVisible="True"
                               MouseDown="TicketIdPlaceholder_MouseDown"/>
                    </Grid>

                    <Button Content="Проверить билет" Click="CheckTicket_Click"
                        Width="120" Height="30"/>

                    <TextBlock x:Name="CheckResultText" FontSize="16" Margin="0,20" FontWeight="Bold"/>
                </StackPanel>
            </TabItem>

            <!-- Отчеты -->
            <TabItem Header="Отчеты" x:Name="ReportsTab">
                <StackPanel Margin="20">
                    <TextBlock Text="Отчет по продажам" FontSize="20" FontWeight="Bold" Margin="0,0,0,20"/>

                    <Button Content="Показать сегодняшние продажи"
                        Click="ShowTodaySales_Click"
                        Width="200" Height="30" Margin="0,0,0,10"/>

                    <ListBox x:Name="ReportListBox" Height="200">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="5">
                                    <TextBlock Text="{Binding Id}" FontWeight="Bold"/>
                                    <TextBlock Text="{Binding Type}"/>
                                    <TextBlock Text="{Binding SaleDate}"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>

                    <TextBlock x:Name="TotalSalesText" FontSize="14" FontWeight="Bold" Margin="0,10"/>
                </StackPanel>
            </TabItem>

            <!-- Админ: управление пользователями и настройками -->
            <TabItem Header="Администрирование" x:Name="AdminTab">
                <StackPanel Margin="20">
                    <TextBlock Text="Управление пользователями" FontSize="18" FontWeight="Bold" Margin="0,0,0,10"/>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <!-- Placeholder Grid для NewUserName -->
                        <Grid Width="150" Height="30" Margin="0,0,10,0">
                            <TextBox x:Name="NewUserName"
                                 VerticalContentAlignment="Center"
                                 TextChanged="NewUserName_TextChanged"/>
                            <TextBlock x:Name="NewUserNamePlaceholder"
                                   Text="Логин"
                                   Margin="5,0,0,0"
                                   VerticalAlignment="Center"
                                   Foreground="Gray"
                                   IsHitTestVisible="True"
                                   MouseDown="NewUserNamePlaceholder_MouseDown"/>
                        </Grid>

                        <!-- Placeholder Grid для NewUserPassword (PasswordBox) -->
                        <Grid Width="150" Height="30" Margin="0,0,10,0">
                            <PasswordBox x:Name="NewUserPassword"
                                     VerticalContentAlignment="Center"
                                     PasswordChanged="NewUserPassword_PasswordChanged"/>
                            <TextBlock x:Name="NewUserPasswordPlaceholder"
                                   Text="Пароль"
                                   Margin="5,0,0,0"
                                   VerticalAlignment="Center"
                                   Foreground="Gray"
                                   IsHitTestVisible="True"
                                   MouseDown="NewUserPasswordPlaceholder_MouseDown"/>
                        </Grid>

                        <ComboBox x:Name="NewUserRole" Width="150" SelectedIndex="0">
                            <ComboBoxItem>Администратор</ComboBoxItem>
                            <ComboBoxItem>Кассир</ComboBoxItem>
                            <ComboBoxItem>Контролер</ComboBoxItem>
                        </ComboBox>
                        <Button Content="Добавить" Click="AddUser_Click" Margin="10,0,0,0"/>
                    </StackPanel>

                    <ListBox x:Name="UsersListBox" Height="150" DisplayMemberPath="Username"/>
                    <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                        <Button Content="Удалить выбранного" Click="RemoveUser_Click" Margin="0,0,10,0"/>
                        <Button Content="Сбросить пароли тестовым" Click="ResetTestPasswords_Click"/>
                    </StackPanel>

                    <Separator Margin="0,15,0,15"/>
                    <TextBlock Text="Настройки цен (админ)" FontSize="18" FontWeight="Bold" Margin="0,0,0,10"/>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Цена взрослого:" VerticalAlignment="Center" Margin="0,0,6,0"/>
                        <TextBox x:Name="AdultPriceTextBox" Width="80"/>
                        <TextBlock Text="Цена детского:" VerticalAlignment="Center" Margin="10,0,6,0"/>
                        <TextBox x:Name="ChildPriceTextBox" Width="80"/>
                        <Button Content="Сохранить" Click="SavePrices_Click" Margin="10,0,0,0"/>
                    </StackPanel>
                </StackPanel>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
